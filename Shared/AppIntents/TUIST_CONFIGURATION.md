# Tuist Configuration for AppIntents

This document explains how AppIntents are configured in the Tuist project setup.

## Project.swift Configuration

### Main App Target (`fig`)

The main app target automatically includes all AppIntents because they're located under `fig/**`:

```swift
sources: [
    "fig/**",      // ← Includes fig/AppIntents/**
    "Shared/**"
]
```

**Included AppIntents:**
- ✅ All LiveActivity intents (PauseIntent, StopIntent, RepeatIntent, ResumeIntent, OpenAlarmAppIntent)
- ✅ Widget configuration intent (ConfigurationAppIntent)
- ✅ Control widget intents (TimerConfiguration, StartTimerIntent)

### Widget Extension Target (`alarm`)

The widget extension target explicitly includes AppIntents to enable Live Activity and widget functionality:

```swift
sources: [
    "alarm/**",
    "Shared/**",
    "fig/AppIntents/**"  // ← Explicitly shared with widget extension
]
```

**Why This Configuration?**

1. **Live Activities require AppIntents in the extension** - The `alarm` target displays Live Activities and needs access to intents like `PauseIntent`, `StopIntent`, etc.

2. **Widgets need configuration intents** - The widget uses `ConfigurationAppIntent` for user customization

3. **Control widgets need their intents** - The control widget uses `TimerConfiguration` and `StartTimerIntent`

## Verification

After running `tuist generate`, you can verify the configuration:

```bash
# Check alarm target includes AppIntents
grep "fig/AppIntents" \
  ~/Library/Developer/Xcode/DerivedData/fig-*/Build/Intermediates.noindex/fig.build/Debug-iphonesimulator/alarm.build/Objects-normal/arm64/alarm.SwiftFileList

# Should show all 8 AppIntent files:
# - fig/AppIntents/LiveActivity/PauseIntent.swift
# - fig/AppIntents/LiveActivity/StopIntent.swift
# - fig/AppIntents/LiveActivity/RepeatIntent.swift
# - fig/AppIntents/LiveActivity/ResumeIntent.swift
# - fig/AppIntents/LiveActivity/OpenAlarmAppIntent.swift
# - fig/AppIntents/Widget/ConfigurationAppIntent.swift
# - fig/AppIntents/ControlWidget/TimerConfiguration.swift
# - fig/AppIntents/ControlWidget/StartTimerIntent.swift
```

## Build Status

✅ **alarm target:** Builds successfully with all AppIntents included
✅ **fig target:** Includes all AppIntents

## Adding New AppIntents

When adding new AppIntent files:

1. **Create the file** in the appropriate subdirectory:
   - `fig/AppIntents/LiveActivity/` for Live Activity intents
   - `fig/AppIntents/Widget/` for widget configuration intents
   - `fig/AppIntents/ControlWidget/` for control widget intents

2. **Run `tuist generate`** to update the Xcode project

3. **No additional configuration needed** - The glob pattern `fig/AppIntents/**` automatically includes new files

## Troubleshooting

### Intent not found in widget extension

**Problem:** Widget can't find an AppIntent type

**Solution:** Verify the intent file is in `fig/AppIntents/**` and run `tuist generate`

### Duplicate symbol errors

**Problem:** Intent defined in multiple places

**Solution:** Ensure the intent only exists in `fig/AppIntents/**`, not in `Shared/**` or `alarm/**`

### Intent not available in main app

**Problem:** Main app can't find an AppIntent

**Solution:** Check that the file is under `fig/AppIntents/**` (covered by `fig/**` sources)

## Related Documentation

- Main AppIntents documentation: `fig/AppIntents/README.md`
- Tuist project configuration: `Project.swift`
- Individual intent files: `fig/AppIntents/{LiveActivity,Widget,ControlWidget}/*.swift`

---

**Last Updated:** October 2025
**Generated by:** Tuist
**Xcode Project:** fig.xcodeproj
